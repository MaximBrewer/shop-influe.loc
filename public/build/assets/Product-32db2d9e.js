import{r as l,a as e,j as a,u as P,W as Y,L as A,b as O,P as W,F as T,C as F,d as V,I as E,g as z}from"./app-a1834876.js";import{B as Z}from"./Breadcrumbs-c6d5be8e.js";import{S as M}from"./index-322c1ee7.js";import{H as K}from"./index-36624c0b.js";import{S as G,P as J}from"./ProductTizer-5170b09f.js";import"./NoPhoto-b07b4944.js";const Q=n=>{const{pagetitle:p,product:r}=n,{images:u}=r.data,[v,o]=l.useState(null),[_,b]=l.useState(null),w=l.useRef(null),f=l.useRef(null),y={asNavFor:_,dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},c={asNavFor:v,dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1};return l.useEffect(()=>{o(w.current),b(f.current)},[]),e("div",{className:"product-slider-wrapper",children:a("div",{className:"product-slider",children:[e(M,{...y,className:"product-slider",ref:w,children:u.map((h,m)=>e("div",{className:"slick-slide p-4",children:e("div",{className:"w-full h-full bg-no-repeat bg-center bg-contain pt-[100%]",style:{backgroundImage:`url('${h}')`}})},m))}),u.length>1?e(M,{...c,className:"product-slider__nav block",ref:f,children:u.map((h,m)=>e("div",{className:"slick-slide",children:e("div",{className:"product-slider__nav-item mx-auto",children:e("div",{className:"w-full h-full bg-no-repeat bg-center bg-contain pt-[100%]",style:{backgroundImage:`url('${h}')`}})})},m))}):""]})})},U="/build/assets/in-stock-tick-8dfb6a57.svg",X=n=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:n.filled?"currentColor":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),ee=n=>{const{sizes:p=[]}=n,[r,u]=l.useState(p.length?p[0]:null),{setModal:v}=P();return a("div",{className:"w-[20rem] lg:w-[24rem] xl:w-[40rem] relative bg-white rounded-2xl py-6 px-3",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"cursor-pointer w-4 lg:w-8 h-4 lg:h-8 absolute right-4 top-4 lg:-right-12 lg:-top-12 text-black opacity-50 lg:text-white",onClick:o=>v(null),viewBox:"0 0 30 30",fill:"none",children:e("path",{d:"M18.3041 15L29.5207 3.78293C29.8293 3.47415 29.9995 3.0622 30 2.62293C30 2.18342 29.8298 1.77098 29.5207 1.46268L28.5378 0.480001C28.2288 0.170489 27.8168 0.000976562 27.3771 0.000976562C26.938 0.000976562 26.5261 0.170489 26.2171 0.480001L15.0005 11.6963L3.78341 0.480001C3.47488 0.170489 3.06268 0.000976562 2.62317 0.000976562C2.18415 0.000976562 1.77195 0.170489 1.46341 0.480001L0.48 1.46268C-0.16 2.10268 -0.16 3.14366 0.48 3.78293L11.6968 15L0.48 26.2166C0.17122 26.5259 0.00121951 26.9378 0.00121951 27.3771C0.00121951 27.8163 0.17122 28.2283 0.48 28.5373L1.46317 29.52C1.77171 29.8293 2.18415 29.999 2.62293 29.999C3.06244 29.999 3.47463 29.8293 3.78317 29.52L15.0002 18.3034L26.2168 29.52C26.5259 29.8293 26.9378 29.999 27.3768 29.999H27.3773C27.8166 29.999 28.2285 29.8293 28.5376 29.52L29.5205 28.5373C29.829 28.2285 29.9993 27.8163 29.9993 27.3771C29.9993 26.9378 29.829 26.5259 29.5205 26.2168L18.3041 15Z",fill:"currentColor"})}),e("div",{className:"border-b py-3 font-bold",children:"Таблица размеров"}),e("div",{className:"my-4 border-b",children:e("ul",{className:"flex flex-wrap gap-y-2",children:p.map((o,_)=>e("li",{children:e("a",{href:"#",onClick:b=>u(o),className:"py-1.5 px-2 block bg-white -mb-px text-xs",style:r.code===o.code?{borderBottom:"1px solid transparent",borderTop:"1px solid #77DAE9",borderLeft:"1px solid #E5E7EB",borderRight:"1px solid #E5E7EB"}:{borderBottom:"1px solid #E5E7EB",borderTop:"1px solid transparent",borderLeft:"1px solid transparent",borderRight:"1px solid transparent"},children:o.title})},_))})}),e("div",{children:r?e("img",{src:r.image,alt:"",className:"w-full"}):""})]})},ne=n=>{const{pagetitle:p,product:r,auth:u,cart:v,favorites:o}=n,{priceFormat:_,moment:b,setModal:w}=P(),[f,y]=l.useState(null),[c,h]=l.useState(null),[m,B]=l.useState(r.data.body?0:1),[k,H]=l.useState([]),[g,D]=l.useState({}),j=t=>{t&&z.post(route("cart.add"),{item:t.id},{preserveScroll:!0})},R=()=>{u.user?z.patch(route("cabinet.favorite.toggle"),{item:r.data.id},{preserveScroll:!0}):z.patch(route("favorite.toggle"),{item:r.data.id},{preserveScroll:!0})},{data:C,setData:S,post:$,processing:te,errors:L,reset:ae}=Y({product_id:r.data.id,name:"",email:"",rate:5,text:""}),q=t=>{t.preventDefault(),$(route("reviews.store"),{preserveScroll:!0})};return l.useEffect(()=>{if(r.data.offers.length){h(r.data.offers[0]);let t=[];for(let d of r.data.offers)for(let i of d.specifications){let s=t.findIndex(N=>N.id==i.id);s<0&&(s=t.length,t.push({id:i.id,title:i.title,values:[]}));let x=t[s].values.findIndex(N=>N.value==i.pivot.value);x<0&&(x=t[s].values.length,t[s].values.push({value:i.pivot.value,offers:[]})),t[s].values[x].offers.push(i.pivot.offer_id)}H(t)}},[r]),l.useEffect(()=>{let t=null;if(c&&c.prices.length){var d=c.prices.findIndex(i=>i.currency=="тен"||i.currency=="KZT");d>-1&&(t=c.prices[d].value)}y(t)},[c,k]),l.useEffect(()=>{let t=[...r.data.offers];for(let d of k){let i=d.values[g[d.id]]?d.values[g[d.id]].offers.map(s=>1*s):[];t=t.filter(s=>i.indexOf(1*s.id)>-1)}h(t[0]??null)},[g]),a(A,{...n,children:[e(O,{title:p}),e("div",{className:"catalogue-categories",children:e("div",{className:"container-outer",children:e("div",{className:"catalogue-categories__outer",children:e("div",{className:"catalogue-categories__inner",children:e(Z,{...n})})})})}),e("div",{className:"product-description",children:e("div",{className:"container-outer",children:e("div",{className:"product-description__outer",children:a("div",{className:"product-description__inner",children:[r.data.images.length?e(Q,{...n}):e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-full h-auto text-gray-300",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),a("div",{className:"product-description__purchase-details",children:[e("div",{className:"product-title fw-700-35-42",children:e("p",{children:p})}),a("div",{className:"product-description__row-one",children:[c?a("div",{className:"in-stock-label",children:[e("div",{className:"in-stock-label__tick center",children:e("img",{src:U,alt:""})}),c.quantity?e("div",{className:"in-stock-label__txt fw-400-14-17",children:"В наличии"}):e("div",{className:"in-stock-label__txt fw-400-14-17",children:"Под заказ"})]}):"",a("div",{className:"articul fw-400-14-17",children:[e("p",{children:"Артикул: "}),e("span",{className:"articul__code",children:r.data.article})]})]}),e("div",{className:"product-description__card",children:a("div",{className:"product-description__card-inner",children:[e("div",{className:"product-description__card-left",children:k.map((t,d)=>a("div",{children:[e("div",{className:"product-description__card-size-wrapper",children:a("div",{className:"product-description__card-size-label fw-700-14-17 flex gap-2",children:[e("span",{children:t.title}),t.id===1&&r.data.sizes&&r.data.sizes.length?e("a",{href:"#",onClick:i=>{i.preventDefault(),w(e(ee,{sizes:r.data.sizes}))},className:"product-description__card-size-link fw-400-14-17",children:"Подобрать размер"}):""]})}),e("div",{className:"product-description__card-size-flexbox",children:t.values.map((i,s)=>e("div",{onClick:x=>D(N=>{const I={...N};return I[t.id]=s,I}),className:`product-description__product-size-item fw-400-12-14 ${g[t.id]==s?"bg-primary-500 text-white":""}`,children:e("p",{children:i.value})},s))})]},t.id))}),e("div",{className:"product-description__card-right",children:a("div",{className:"btn-secondary product-description__btn-secondary",children:[e("div",{className:"product-description__btn-secondary-phone-icon-wrapper",children:e("img",{src:W,alt:""})}),e("div",{className:"product-description__btn-secondary-txt-wrapper fw-700-16-20",children:e("p",{children:"Заказать звонок"})})]})})]})}),e("div",{className:"product-description__line"}),a("div",{className:"product-description__row-two",children:[e("div",{className:"catalogue__item-price fw-700-18-22 center mr-4",children:f&&c&&c.quantity?_(f):"Нет предложения"}),a("div",{className:"purchase-btn-group product-description__purchase-btn-group center",children:[c&&c.quantity?e(T,{children:v.items.findIndex(t=>t.offer.id==c.id)<0?e(T,{children:a("div",{className:"btn-purchase product-description__btn-purchase",onClick:()=>j(c),children:[e(F,{className:"w-5 h-5 mr-2"}),e("div",{className:"btn-purchase__txt fw-700-16-20",children:"Купить"})]})}):e(V,{href:route("cart.index"),children:a("div",{className:"btn-purchase product-description__btn-purchase",children:[e(F,{className:"w-5 h-5 mr-2"}),e("div",{className:"btn-purchase__txt fw-700-16-20",children:"Перейти в корзину"})]})})}):"",e("div",{className:"heart-icon-wrapper product-description__heart-icon-wrapper text-primary-500",onClick:()=>{R()},children:e(X,{className:"w-4 h-4",filled:o.indexOf(r.data.id)>-1})})]})]})]})]})})})}),e("div",{className:"product-review-tab-wrapper pb-20",children:a("div",{className:"container-outer",children:[a("div",{className:"product-review-tab-wrapper__tab-line fw-700-20-24",children:[r.data.body?e("button",{className:`tab-item ${m===0?"product-active":""}`,onClick:t=>B(0),children:"Описание"}):"",e("button",{className:`tab-item ${m===1?"product-active":""}`,onClick:t=>B(0),children:"Отзывы"})]}),e("div",{className:"product-review-tab-wrapper__bottom-section",children:e("div",{className:"product-review-tab-wrapper__bottom-section-inner",children:a("ul",{className:"product-review-tab-wrapper__bottom-section-list",children:[e("ul",{className:"product-review-tab-wrapper__bottom-list-item",style:{display:m===0?"":"none"},children:a("li",{className:"product-review-tab-wrapper__bottom-section-item",children:[e("div",{className:"product-review-tab-wrapper__bottom-section-title fw-600-20-24",children:e("p",{children:"Основное"})}),e("div",{className:"product-review-tab-wrapper__bottom-section-desc fw-400-16-19",children:K(r.data.body??"")})]})}),e("div",{className:"product-review-tab-wrapper__bottom-list-item",style:{display:m===1?"":"none"},children:e("ul",{className:"comment-wrapper product-review-tab-wrapper__comment-wrapper",children:r.data.reviews.map((t,d)=>a("li",{className:"comment-wrapper__comment comment",children:[a("div",{className:"comment__left",children:[e("div",{className:"comment__photo",children:e("img",{src:t.avatar,alt:""})}),a("div",{className:"comment__content ",children:[e("div",{className:"comment__fullname fw-500-16-22",children:t.name}),e("div",{className:"comment__txt fw-400-16-19",children:t.text}),e("div",{className:"comment__date fw-500-14-20",children:b(t.created_at).format("DD.MM.YYYY HH:mm")})]})]}),e("div",{className:"comment__right",children:e("div",{className:"catalogue__item-rating",children:e("div",{className:"catalogue__stars",children:[null,null,null,null,null].map((i,s)=>e("div",{className:"catalogue__star-wrapper center",children:e(G,{className:"w-4 h-4 shrink-0 text-yellow-400"})},s))})})})]},d))})})]})})})]})}),e("form",{className:"contact mb-20",onSubmit:q,children:e("div",{className:"container-outer",children:e("div",{className:"contact__outer",children:a("div",{className:"contact__inner",children:[a("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[a("div",{children:[e("input",{id:"name",type:"text",name:"name",value:C.name,className:"contact__input input",onChange:t=>S("name",t.target.value),placeholder:"Имя"}),e(E,{message:L.name})]}),a("div",{children:[e("input",{id:"email",type:"text",name:"email",value:C.email,className:"contact__input input",onChange:t=>S("email",t.target.value),placeholder:"E-mail"}),e(E,{message:L.email})]})]}),a("div",{className:"contact__row fw-400-16-19",children:[e("textarea",{id:"text",name:"text",value:C.text,className:"feedback-textarea",onChange:t=>S("text",t.target.value),placeholder:"Отзыв"}),e(E,{message:L.text})]}),e("div",{className:"contact__row fw-400-16-19",children:e("button",{className:"btn-primary fw-700-16-20",children:"Отправить"})})]})})})}),r.data.similars.length?e("div",{className:"similar-products bg_aqua",children:e("div",{className:"container-outer",children:e("div",{className:"similar-products__outer",children:a("div",{className:"similar-products__inner",children:[e("div",{className:"similar-products-title-label similar-products__similar-products-title-label fw-700-45-55 color_white",children:e("p",{children:"Похожие товары"})}),e("ul",{className:"similar-products-slick",children:r.data.similars.map(t=>e("li",{className:"catalogue-item",children:e(J,{item:t})},t.id))}),e("div",{className:"similar-products__btn-wrapper",children:e("button",{className:"btn-primary similar-products__btn-primary fw-400-18-30",children:"Посмотреть все"})})]})})})}):""]})};export{ne as default};
