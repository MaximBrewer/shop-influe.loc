import{q as m,r as d,h as b,j as n,a,d as y,u as v}from"./app-0a8de703.js";import{P as x}from"./ProductTizer-a26392a0.js";import{P as N}from"./Paginate-090ae85b.js";import{S}from"./react-select.esm-195f67cb.js";const $=({item:e,filter:s,setFilter:r})=>{const[i,u]=d.useState(!1);return n("li",{className:"filter-sidebar__item",children:[a("div",{className:"filter-sidebar__item-title fw-600-16-19 cursor-pointer py-[9px] -mt-[9px] mb-0 px-[21px] -mx-[21px]",onClick:t=>u(c=>!c),children:e.title}),i?a("ul",{className:"checkbox-grid max-h-[24rem] overflow-y-auto p-2",children:e.values.map((t,c)=>a("li",{children:n("label",{htmlFor:`specification-${e.id}-${c}`,className:"checkbox-grid__item",children:[a("div",{className:"checkbox-wrapper center",children:a("input",{type:"checkbox",name:`specification-${e.id}`,id:`specification-${e.id}-${c}`,onChange:h=>{r(p=>{const l={...p};l[e.accounting_id]=l[e.accounting_id]?l[e.accounting_id]:[];const g=l[e.accounting_id].indexOf(t);return g>-1?l[e.accounting_id].splice(g,1):l[e.accounting_id].push(t),l[e.accounting_id].length||delete l[e.accounting_id],l})}})}),a("div",{className:"checkbox-label-wrapper center",children:a("div",{className:"checkbox-label",children:t})})]})},`${e.id}-${c}`))}):""]})},w=e=>{const{specifications:s,ziggy:r,category:i=null,subcategory:u=null,subsubcategory:t=null}=m().props,[c,h]=d.useState({}),p=d.useRef(!1),l=d.useRef(0);d.useEffect(()=>{if(p.current){clearTimeout(l.current);let o={};for(let _ in c)o[_]=c[_].join(":::");l.current=setTimeout(()=>{i?b.visit(route("category",t?{...o,category:i.data.slug,subcategory:u.data.slug,subsubcategory:t.data.slug}:u?{...o,category:i.data.slug,subcategory:u.data.slug}:{...o,category:i.data.slug}),{preserveState:!0,preserveScroll:!0}):b.visit(route("catalog",o))},2e3)}p.current=!0},[c]);const g=o=>{clearTimeout(l.current)};return d.useEffect(()=>(document.addEventListener("inertia:start",g),()=>{clearTimeout(l.current),document.removeEventListener("inertia:start",g)}),[]),n("ul",{className:"filter-sidebar catalogue__filter-sidebar fw-400-16-19",children:[a("li",{className:"filter-sidebar__title center",children:"Фильтр"}),a("ul",{className:"filter-sidebar__inner",children:s.data.map(o=>a(d.Fragment,{children:o.values.length?a($,{item:o,filter:c,setFilter:h}):""},o.id))})]})},j=({categories:e})=>{const{products:s,category:r=null,subcategory:i=null,subsubcategory:u=null}=m().props;return n("div",{className:"catalogue catalogue-section__catalogue",children:[n("div",{className:"catalogue__left",children:[u?"":a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:e.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(y,{href:route("category",i?{category:r.data.slug,subcategory:i.data.slug,subsubcategory:t.slug}:r?{category:r.data.slug,subcategory:t.slug}:{category:t.slug}),className:"catalogue-sidebar-item",children:[a("div",{className:"catalogue-sidebar-item__title",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}),r?a(w,{}):""]}),n("div",{className:"catalogue__grid",children:[a("ul",{className:"catalogue__grid-inner",children:s.data.map(t=>a("li",{className:"catalogue__item",children:a(x,{item:t})},t.id))}),a(N,{...s.meta})]})]})},T={control:(e,s)=>({...e,borderColor:"rgba(0,0,0,.2) !important",borderRadius:"9999px",minHeight:"40px",boxShadow:"none !important"}),indicatorSeparator:(e,s)=>({...e,display:"none"}),singleValue:(e,s)=>({...e,color:"#414D55",padding:"0 4px"}),menu:(e,s)=>({...e,minWidth:"12rem",left:"auto",right:0})},f=[{value:"title:asc",label:"По названию А-Я"},{value:"title:desc",label:"По названию Я-А"},{value:"min_price:asc",label:"Дешевле"},{value:"min_price:desc",label:"Дороже"}],z=()=>{const{sort:e,order:s}=m().props;return a(S,{options:f,styles:T,isSearchable:!1,placeholder:"Сортировка",value:e&&s?f.find(r=>r.value==`${e}:${s}`):f[0],onChange:r=>b.visit(route("catalog",{sort:r.value.split(":")[0],order:r.value.split(":")[1]})),theme:r=>({...r,colors:{...r.colors,primary25:"#f1f5f8",primary:"#3A9EAA"}})})},F=()=>{const{products:e}=m().props,{numWord:s}=v();return a("div",{className:"total-found-label fw-400-16-19",children:n("span",{children:["Показано ",e.meta.total," ",s(e.meta.total,["товар","товара","товаров"])]})})};export{j as M,z as S,F as T};
