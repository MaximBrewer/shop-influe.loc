import{r as l,a as e,j as t,u as D,W as Y,L as O,b as R,P as W,F as P,C as T,d as A,g as z}from"./app-6f06b7a2.js";import{B as V}from"./Breadcrumbs-b9710aa1.js";import{S as E}from"./index-87877f87.js";import{H as K}from"./index-f4c94687.js";import{S as Z,P as G}from"./ProductTizer-67b4037b.js";import{I as F}from"./InputError-f9d962ca.js";import"./NoPhoto-5e8f9cae.js";const J=n=>{const{pagetitle:w,product:r}=n,{images:p}=r.data,[b,g]=l.useState(null),[x,y]=l.useState(null),u=l.useRef(null),v=l.useRef(null),c={asNavFor:x,dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},_={asNavFor:b,dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1};return l.useEffect(()=>{g(u.current),y(v.current)},[]),e("div",{className:"product-slider-wrapper",children:t("div",{className:"product-slider",children:[e(E,{...c,className:"product-slider",ref:u,children:p.map((o,m)=>e("div",{className:"slick-slide p-4",children:e("div",{className:"w-full h-full bg-no-repeat bg-center bg-contain pt-[100%]",style:{backgroundImage:`url('${o}')`}})},m))}),p.length>1?e(E,{..._,className:"product-slider__nav block",ref:v,children:p.map((o,m)=>e("div",{className:"slick-slide",children:e("div",{className:"product-slider__nav-item mx-auto",children:e("div",{className:"w-full h-full bg-no-repeat bg-center bg-contain pt-[100%]",style:{backgroundImage:`url('${o}')`}})})},m))}):""]})})},Q="/build/assets/in-stock-tick-8dfb6a57.svg",U=n=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:n.filled?"currentColor":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),de=n=>{const{pagetitle:w,product:r,auth:p,cart:b,favorites:g}=n,{priceFormat:x,moment:y}=D(),[u,v]=l.useState(null),[c,_]=l.useState(null),[o,m]=l.useState(r.data.body?0:1),[k,H]=l.useState([]),[f,j]=l.useState({}),M=a=>{a&&z.post(route("cart.add"),{item:a.id},{preserveScroll:!0})},$=()=>{p.user?z.patch(route("cabinet.favorite.toggle"),{item:r.data.id},{preserveScroll:!0}):z.patch(route("favorite.toggle"),{item:r.data.id},{preserveScroll:!0})},{data:S,setData:C,post:q,processing:X,errors:I,reset:ee}=Y({product_id:r.data.id,name:"",email:"",rate:5,text:""}),B=a=>{a.preventDefault(),q(route("reviews.store"),{preserveScroll:!0})};return l.useEffect(()=>{if(r.data.offers.length){_(r.data.offers[0]);let a=[];for(let d of r.data.offers)for(let s of d.specifications){let i=a.findIndex(h=>h.id==s.id);i<0&&(i=a.length,a.push({id:s.id,title:s.title,values:[]}));let N=a[i].values.findIndex(h=>h.value==s.pivot.value);N<0&&(N=a[i].values.length,a[i].values.push({value:s.pivot.value,offers:[]})),a[i].values[N].offers.push(s.pivot.offer_id)}H(a)}},[r]),l.useEffect(()=>{let a=null;if(c&&c.prices.length){var d=c.prices.findIndex(s=>s.currency=="тен"||s.currency=="KZT");d>-1&&(a=c.prices[d].value)}v(a)},[c,k]),l.useEffect(()=>{let a=[...r.data.offers];for(let d of k){let s=d.values[f[d.id]]?d.values[f[d.id]].offers.map(i=>1*i):[];a=a.filter(i=>s.indexOf(1*i.id)>-1)}_(a[0]??null)},[f]),t(O,{...n,children:[e(R,{title:w}),e("div",{className:"catalogue-categories",children:e("div",{className:"container-outer",children:e("div",{className:"catalogue-categories__outer",children:e("div",{className:"catalogue-categories__inner",children:e(V,{...n})})})})}),e("div",{className:"product-description",children:e("div",{className:"container-outer",children:e("div",{className:"product-description__outer",children:t("div",{className:"product-description__inner",children:[r.data.images.length?e(J,{...n}):e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-full h-auto text-gray-300",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),t("div",{className:"product-description__purchase-details",children:[e("div",{className:"product-title fw-700-35-42",children:e("p",{children:w})}),t("div",{className:"product-description__row-one",children:[c?t("div",{className:"in-stock-label",children:[e("div",{className:"in-stock-label__tick center",children:e("img",{src:Q,alt:""})}),c.quantity?e("div",{className:"in-stock-label__txt fw-400-14-17",children:"В наличии"}):e("div",{className:"in-stock-label__txt fw-400-14-17",children:"Под заказ"})]}):"",t("div",{className:"articul fw-400-14-17",children:[e("p",{children:"Артикул: "}),e("span",{className:"articul__code",children:r.data.article})]})]}),e("div",{className:"product-description__card",children:t("div",{className:"product-description__card-inner",children:[e("div",{className:"product-description__card-left",children:k.map((a,d)=>t("div",{children:[e("div",{className:"product-description__card-size-wrapper",children:e("div",{className:"product-description__card-size-label fw-700-14-17",children:e("p",{children:a.title})})}),e("div",{className:"product-description__card-size-flexbox",children:a.values.map((s,i)=>e("div",{onClick:N=>j(h=>{const L={...h};return L[a.id]=i,L}),className:`product-description__product-size-item fw-400-12-14 ${f[a.id]==i?"bg-primary-500 text-white":""}`,children:e("p",{children:s.value})},i))})]},a.id))}),e("div",{className:"product-description__card-right",children:t("div",{className:"btn-secondary product-description__btn-secondary",children:[e("div",{className:"product-description__btn-secondary-phone-icon-wrapper",children:e("img",{src:W,alt:""})}),e("div",{className:"product-description__btn-secondary-txt-wrapper fw-700-16-20",children:e("p",{children:"Заказать звонок"})})]})})]})}),e("div",{className:"product-description__line"}),t("div",{className:"product-description__row-two",children:[e("div",{className:"catalogue__item-price fw-700-18-22 center mr-4",children:u&&c&&c.quantity?x(u):"Нет предложения"}),t("div",{className:"purchase-btn-group product-description__purchase-btn-group center",children:[c&&c.quantity?e(P,{children:b.items.findIndex(a=>a.offer.id==c.id)<0?e(P,{children:t("div",{className:"btn-purchase product-description__btn-purchase",onClick:()=>M(c),children:[e(T,{className:"w-5 h-5 mr-2"}),e("div",{className:"btn-purchase__txt fw-700-16-20",children:"Купить"})]})}):e(A,{href:route("cart.index"),children:t("div",{className:"btn-purchase product-description__btn-purchase",children:[e(T,{className:"w-5 h-5 mr-2"}),e("div",{className:"btn-purchase__txt fw-700-16-20",children:"Перейти в корзину"})]})})}):"",e("div",{className:"heart-icon-wrapper product-description__heart-icon-wrapper text-primary-500",onClick:()=>{$()},children:e(U,{className:"w-4 h-4",filled:g.indexOf(r.data.id)>-1})})]})]})]})]})})})}),e("div",{className:"product-review-tab-wrapper pb-20",children:t("div",{className:"container-outer",children:[t("div",{className:"product-review-tab-wrapper__tab-line fw-700-20-24",children:[r.data.body?e("button",{className:`tab-item ${o===0?"product-active":""}`,onclick:a=>m(0),children:"Описание"}):"",e("button",{className:`tab-item ${o===1?"product-active":""}`,onclick:a=>m(0),children:"Отзывы"})]}),e("div",{className:"product-review-tab-wrapper__bottom-section",children:e("div",{className:"product-review-tab-wrapper__bottom-section-inner",children:t("ul",{className:"product-review-tab-wrapper__bottom-section-list",children:[e("ul",{className:"product-review-tab-wrapper__bottom-list-item",style:{display:o===0?"":"none"},children:t("li",{className:"product-review-tab-wrapper__bottom-section-item",children:[e("div",{className:"product-review-tab-wrapper__bottom-section-title fw-600-20-24",children:e("p",{children:"Основное"})}),e("div",{className:"product-review-tab-wrapper__bottom-section-desc fw-400-16-19",children:K(r.data.body??"")})]})}),e("div",{className:"product-review-tab-wrapper__bottom-list-item",style:{display:o===1?"":"none"},children:e("ul",{className:"comment-wrapper product-review-tab-wrapper__comment-wrapper",children:r.data.reviews.map((a,d)=>t("li",{className:"comment-wrapper__comment comment",children:[t("div",{className:"comment__left",children:[e("div",{className:"comment__photo",children:e("img",{src:a.avatar,alt:""})}),t("div",{className:"comment__content ",children:[e("div",{className:"comment__fullname fw-500-16-22",children:a.name}),e("div",{className:"comment__txt fw-400-16-19",children:a.text}),e("div",{className:"comment__date fw-500-14-20",children:y(a.created_at).format("DD.MM.YYYY HH:mm")})]})]}),e("div",{className:"comment__right",children:e("div",{className:"catalogue__item-rating",children:e("div",{className:"catalogue__stars",children:[null,null,null,null,null].map((s,i)=>e("div",{className:"catalogue__star-wrapper center",children:e(Z,{className:"w-4 h-4 shrink-0 text-yellow-400"})},i))})})})]},d))})})]})})})]})}),e("form",{className:"contact mb-20",onSubmit:B,children:e("div",{className:"container-outer",children:e("div",{className:"contact__outer",children:t("div",{className:"contact__inner",children:[t("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[t("div",{children:[e("input",{id:"name",type:"text",name:"name",value:S.name,className:"contact__input input",onChange:a=>C("name",a.target.value),placeholder:"Имя"}),e(F,{message:I.name})]}),t("div",{children:[e("input",{id:"email",type:"text",name:"email",value:S.email,className:"contact__input input",onChange:a=>C("email",a.target.value),placeholder:"E-mail"}),e(F,{message:I.email})]})]}),t("div",{className:"contact__row fw-400-16-19",children:[e("textarea",{id:"text",name:"text",value:S.text,className:"feedback-textarea",onChange:a=>C("text",a.target.value),placeholder:"Отзыв"}),e(F,{message:I.text})]}),e("div",{className:"contact__row fw-400-16-19",children:e("button",{className:"btn-primary fw-700-16-20",children:"Отправить"})})]})})})}),r.data.similars.length?e("div",{className:"similar-products bg_aqua",children:e("div",{className:"container-outer",children:e("div",{className:"similar-products__outer",children:t("div",{className:"similar-products__inner",children:[e("div",{className:"similar-products-title-label similar-products__similar-products-title-label fw-700-45-55 color_white",children:e("p",{children:"Похожие товары"})}),e("ul",{className:"similar-products-slick",children:r.data.similars.map(a=>e("li",{className:"catalogue-item",children:e(G,{item:a})},a.id))}),e("div",{className:"similar-products__btn-wrapper",children:e("button",{className:"btn-primary similar-products__btn-primary fw-400-18-30",children:"Посмотреть все"})})]})})})}):""]})};export{de as default};
